<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Root Config</title>

    <!-- This script is required for react-refresh to work properly -->
    <script>
      const reactOrigins = ["http://localhost:9001", "http://localhost:9002"];
      const vueOrigins = ["http://localhost:9004", "http://localhost:9005"];
    
      function appendReactRefreshScript(origin) {
        const reactRefreshInteropabilityScript = document.createElement("script");
        reactRefreshInteropabilityScript.type = "module";
        reactRefreshInteropabilityScript.textContent = `
          import RefreshRuntime from '${origin}/@react-refresh';
          RefreshRuntime.injectIntoGlobalHook(window);
        `;
        document.head.appendChild(reactRefreshInteropabilityScript);
      }
    
      function appendVueHMRScript(origin) {
        const vueHMRScript = document.createElement("script");
        vueHMRScript.type = "module";
        vueHMRScript.textContent = `
          import('${origin}/@vite/client');
        `;
        document.head.appendChild(vueHMRScript);
      }
    
      // React HMR setup
      window.$RefreshReg$ = () => {};
      window.$RefreshSig$ = () => (type) => type;
      window.__vite_plugin_react_preamble_installed__ = true;
    
      reactOrigins.forEach((origin) => {
        appendReactRefreshScript(origin);
      });
    
      // Vue HMR setup
      vueOrigins.forEach((origin) => {
        appendVueHMRScript(origin);
      });
    </script>
    

    <script type="importmap">
      {
        "imports": {
          "react": "https://cdn.jsdelivr.net/npm/react@18.3.1/+esm",
          "react-dom": "https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm",
          "vue": "https://cdn.jsdelivr.net/npm/vue@3.5.0/+esm",
          "react-dom/client": "https://cdn.jsdelivr.net/npm/react-dom@18.3.1/+esm",
          "single-spa": "https://ga.jspm.io/npm:single-spa@5.9.5/lib/esm/single-spa.min.js",
          "react/jsx-dev-runtime": "https://ga.jspm.io/npm:react@18.3.1/dev.jsx-dev-runtime.js",
          "react/jsx-runtime": "https://ga.jspm.io/npm:react@18.3.1/dev.jsx-runtime.js",
          "atomic-router": "https://cdn.jsdelivr.net/npm/atomic-router@0.10.1/+esm",
          "atomic-router-react": "https://cdn.jsdelivr.net/npm/atomic-router-react@0.10.0/+esm",
          "effector-react": "https://cdn.jsdelivr.net/npm/effector-react@23.2.1/+esm",
          "@todo/root-config": "http://localhost:9000/src/todo-root-config.ts",
          "@todo/navbar": "http://localhost:9001/src/todo-navbar.tsx",
          "@todo/create-task": "http://localhost:9002/src/todo-create-task.tsx",
          "@todo/tasks-list": "http://localhost:9004/src/main.ts",
          "@todo/one-task": "http://localhost:9005/src/main.ts",
          "@todo/utils": "http://localhost:9003/src/todo-utils.ts"
        },
        "scopes": {
          "https://ga.jspm.io/": {
            "scheduler": "https://ga.jspm.io/npm:scheduler@0.23.0/dev.index.js"
          }
        }
      }
    </script>
  </head>

  <body>
    <noscript> You need to enable JavaScript to run this app. </noscript>
    <script>
      import("@todo/root-config");
    </script>
    <import-map-overrides-full
      show-when-local-storage="devtools"
      dev-libs
    ></import-map-overrides-full>
  </body>
</html>
